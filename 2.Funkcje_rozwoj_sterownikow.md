# Funkcje i rozwój sterowników [Przetłumaczone]

## Poruszane tematy: [Przetłumaczone]
###  1. Budowa wewnętrzna sterownika
###  2. Zasada pracy sterownika
###  3. Zapis i odczyt danych
###  4. Obszary zastosowań
###  5. Rozwój sterowników

## 1. Budowa wewnętrzna sterownika [Przetłumaczone]

### Jednostka PLC składa się z następujących elementów: [Przetłumaczone]
- jednostka centralna (CPU)
- pamięć
- moduły wejścia
- moduły wyjścia
- moduły komunikacji
- moduł zasilania

### Jednostka centralna - CPU [Przetłumaczone]
Główny komponent każdego sterownika PLC. Odpowiedzialna za pracę sterownika, prawidłową obsługę modułów rozszerzeń, wykonywanie programu sterującego i komunikację z osobą programującą. 
Najważniejszym elementem jednostki centralnej jest mikroprocesor, którego parametry narzucają możliwości sterownika i jego specyfikację np.:

[Przetłumaczone]
- ilość zmiennych wejściowych i wyjściowych
- maksymalna ilość obsługiwanych modułów rozszerzeń
- szybkość działania sterownika - parametr określający tę wartość wyraża się jako czas cyklu programowego np. jako liczbę wykonywanych instrukcji na jednostkę czas.
- rozmiar pamięci przeznaczonej na dane użytkownika jak i dla programu
- możliwość korzystania z funkcji specjalnych do których należą m.in operacje zmiennoprzecinkowe
- możliwości komunikacyjne np. obsługa funkcji sieci LAN 

### Pamięć [Przetłumaczone]
Element kluczowy do działania CPU. Przechowuje ona program sterujący oraz dane użytkownika.

#### Stosowane rodzaje pamięci [Przetłumaczone]
- RAM - ang. Random Access Memory - stosowana jako pamięć operacyjna, charakteryzuje się dużymi prędkościami odczytu i zapisu. Po odłączeniu zasilania traci swoją zawartość. Z tej przyczyny stosuje się dodatkową baterię, by ta zastąpiła zasilanie gdy go brakuje.
- PROM - ang. Programmable Read Only-Memory - programowalna pamięć służąca jedynie do odczytu. Jej nadpisanie polega na przepaleniu złączy wewnątrz pamięci. Stosuje się matryce oporowe i tranzystorowe. W tych pierwszych oporniki są przepalane na rozwarcie, co oznacza zaprogramowanie zera logicznego. Tranzystory zaś przepalane są na zwarcie, co jest równoznaczne z zaprogramowaniem jedynki logicznej.
- EEPROM - ang. Electrically Erasable Programmable Read-Only Memory - programowalna pamięć służąca do odczytu, którą programuje i wymazuje się elektrycznie. W przeciwieństwie do pamięci typu PROM można ją również nadpisywać. Nie wymaga podtrzymania zasilania jak pamięć typu RAM. Wykorzystywana jako pamięć programu ale również jako pamięć do przechowywania kopii zapasowych.
- FLASH EPROM - ang. Flash Erasable Programmable Read-Only Memory - typ pamięci będący rozwinięciem technologii EEPROM. Stosowana tam, gdzie EEPROM, ale również jako nośnik kopii danych, które można przenosić między sterownikami np. w postaci kart SD.

### Moduły wejścia [Przetłumaczone]
Dzielimy je na cyfrowe i analogowe. Te pierwsze pobierają dane w postaci binarnej (1/0), a te drugie w postaci sygnałów ciągłych np. wartość temperatury, wagi, wychylenia. 

#### Wejścia cyfrowe [Przetłumaczone]
Stanowią kluczowy element interfejsu komunikacji między elementami zewnętrznego systemu sterowania a CPU. Odpowiedzialne są za konwersję sygnałów zmiennych lub stałych pochodzących z urządzeń zewnętrznych na sygnały cyfrowe, zrozumiałe dla jednostki centralnej.
Spotyka się moduły zasilane prądem stałym, gdzie najczęściej zeru logicznemu odpowiada 0V, a jedynce 24V, oraz zasilane prądem przemiennym, które poziom logiczny dostosowują do wartości napięcia sieci energetycznej.
Często spotyka się zastosowanie separacji galwanicznej (tj. rozwiązanie, w którym prąd z jednego bloku elektrycznego nie przepływał bezpośrednio do drugiego bloku) między układami zewnętrznymi a główną magistralą sterownika PLC. W tym celu stosuje się transportery dla prądu stałego i optoizolatory dla prądu przemiennego.
Do wejść cyfrowych możemy podłączyć np. przyciski i przełączniki, a także np. wyłączniki, krańcówki i inne czujniki pracujące na sygnale dyskretnym.

#### Wejścia analogowe [Przetłumaczone]
Ich zadaniem jest tłumaczenie otrzymanych sygnałów analogowych na sygnały cyfrowe, zrozumiałem przez jednostkę centralną. Głównym elementem tego modułu jest przetwornik analogowo-cyfrowy, przekazujący dalej dyskretną postać odebranego sygnału wejściowego. Dokonuje on kwantyzacji najczęściej na 16 bitach. Często spotykanymi rozdzielczościami takiego przetwornika to od 12 do 16 bitów.
Stosuje się wiele sygnałów analogowych. Oto kilka przykładów:
- ###### sygnały napięciowe np. 0 - 10V, 1 - 5V, -10 - +10V
- ###### sygnały prądowe np. 0 - 20mA, 4 - 20mA
- ###### sygnał pomiaru rezystancji

### Moduły wyjścia [Przetłumaczone]
Podobnie jak wejścia, dzielimy je ze względu na rodzaj danych, które z nich można otrzymać - cyfrowe i analogowe. Służą do sterowania urządzeniami wykonawczymi automatyki np. styki, regulatory, elektrozawory, układy kontrolne.

#### Wyjścia cyfrowe [Przetłumaczone]
Służą do wyprowadzania sygnałów w postaci dyskretnej do zewnętrznych obwodów urządzeń wykonawczych. Najczęściej podłączane są do przełączników bądź styczników, które są odpowiedzialne za działanie urządzeń/modułów zewnętrznych wymagających do sterowania sygnału dyskretnego (typu włącz/wyłącz) – a więc np. grzałki czy pompy. 
Rozróżniamy dwie grupy wyjść cyfrowych ze względu na rodzaj elementu sterującego wyjścia:

- ###### Wyjścia przekaźnikowe [Przetłumaczone]
Posiadają wyprowadzenia dla styków przekaźników normalnie otwartych i zamkniętych, których celem jest załączanie i rozłączanie zewnętrznych układów elektrycznych.

- ###### Wyjścia półprzewodnikowe [Przetłumaczone]
Zamiast styków stosuje się w nich tranzystory dla układów prądu stałego i tyrystory lub triaki dla układów prądu zmiennego. Pełnią tę samą funkcję co przekaźniki, ale mają nad nimi znaczącą przewagę w postaci szybkości działania i wytrzymałości, jak i podczas pracy nie emitują żadnych dźwięków.

#### Wyjścia analogowe [Przetłumaczone]
Ich zadaniem jest zamiana zapisanych w pamięci wartości liczbowych na sygnały ciągłe w czasie. Dalej, podobnie jak wyjścia cyfrowe, przekazują sygnały do urządzeń zewnętrznych.
Najważniejszym elementem tego modułu jest przetwornik cyfrowo-analogowy. Na jego wyjściu pojawiają się sygnały prądowe lub napięciowe. Najczęściej stosowane są te, które zostały wymienione przy wejściach analogowych. Często spotykanymi rozdzielczościami takiego przetwornika to od 12 do 16 bitów.

### Moduł komunikacji [Przetłumaczone]

Moduł komunikacji ma za zadanie sprzęganie innych urządzeń ze sterownikiem poprzez wymianę danych między nimi. Do takiej komunikacji wykorzystuje się przemysłową sieć komunikacyjną.
Przykłady urządzeń, z którymi może komunikować się sterownik:

- inne sterowniki PLC, w tym te pracujące w trybie redundantnym
- czujniki i przetworniki pomiarowe, czujniki inteligentne
- urządzenia wykonawcze wyposażone we własne interfejsy komunikacyjne
- systemy sterowania nadrzędnego
- urządzenie HMI (Human-Machine Interface) np. pulpity sterownicze, wyświetlacze, diody informacyjne

### Moduł zasilania [Przetłumaczone]
Element odpowiedzialny za dostarczenie energii niezbędnej do pracy sterownika. Może stanowić osobną część, ale również spotyka się zasilacze zintegrowane w obudowie sterownika. Stosuje się na ogół układy przystosowane do zasilania napięciem stałym 24V, ale również spotykane są konstrukcje mogące zasilać sterownik bezpośrednio z sieci energetycznej o napięciu zmiennym 230V lub 110V (zależy to od systemu energetycznego kraju).
Jako zasilacz często stosuje się zasilacze impulsowe, które charakteryzują się następującymi cechami:
- dużą stabilizacją napięcia wyjściowego
- wysoką sprawnością przetwornicy napięcia zmiennego na napięcie stałe
- dużą mocą w stosunku do małych gabarytów
- wbudowanymi zabezpieczeniami zapobiegającymi przepięciom i przeciążeniom
- spełnianiem wielu norm, pozwalającym na pracę w trudnych warunkach jak i kompatybilność elektromagnetyczną

Zasilacze stosowane w sterownikach są często dedykowane do projektowanych konstrukcji, przez co ich koszt jest dość spory.

## 2. Zasada pracy sterownika [Przetłumaczone]

Każdy sterownik PLC działa na zasadzie ciągłego zapętlania sekwencji rozkazów zapisanych w jego pamięci, nazywanych cyklem.
Pojedynczy rozkaz jest najmniejszą częścią programu sterującego i składa się z operacji określającej rodzaj wykonywanej funkcji oraz argumentów określających sygnały wejściowe i wyjściowe sterownika powiązanych ze sobą funkcjami logicznymi. Rozkazy te są przetwarzane przez system mikroprocesorowy sterownika, który na ich podstawie wykonuje odpowiednie działanie, takie jak: operacje logiczne, operacje arytmetyczne, odczyt i zapis danych z/do pamięci.

Wykonanie części faz cyklu uzależnione jest od trybu pracy sterownika. Podstawowe tryby pracy to:
- RUN – właściwy tryb pracy sterownika, w którym wykonywane są wszystkie fazy cyklu programowego. Użytkownik nie może modyfikować w jego trakcie zawartości programu.
- STOP – tryb zatrzymania sterownika, w którym zwykle pomijany jest odczyt oraz zapis danych oraz zawsze pomijana jest faza wykonania programu. Tryb ten przeznaczony jest do programowania i konfigurowania sterownika. Użytkownik może sterować wyjściami sterownika poprzez wymuszanie odpowiednich stanów logicznych.
- MONITOR – tryb pracy sterownika z możliwością wglądu w jego pamięć. Pozwala użytkownikowi sprawdzić poprawność działania swojej aplikacji, poprzez podgląd wartości charakterystycznych zmiennych procesowych oraz możliwość wymuszania stanów logicznych na wyjściach sterownika. Możliwa również jest edycja większości obszarów pamięci sterownika (zmiana wartości timerów, liczników, pamięci I/O. itp.). Tryb MONITOR jest szczególnie przydatny w fazie uruchamiania systemu sterowania. 

Specjalne tryby przeznaczone do testowania: 
- praca w pojedynczym cyklu (ang. Single Sweep), 
- praca krokowa (wykonanie tylko jednego rozkazu)
- praca z normalnym cyklem, ale bez aktywizacji sygnałów wyjściowych w 
modułach wyjść cyfrowych (tryb testowania).

[Przetłumaczone]
Cykl programowy zwykle trwa od ułamków do kilkudziesięciu ms. W przypadku przekroczenia dopuszczalnego czasu trwania cyklu (zwykle od 100 do 500 ms) cykl jest przerywany i rejestrowany jest błąd przekroczenia czasu cyklu. Długości trwania cykli monitorowane są stale poprzez istniejący w CPU układ zegara, tzw. [watchdog](https://en.wikipedia.org/wiki/Watchdog_timer).

### Etapy cyklu pracy sterownika: [Przetłumaczone]

##### 1. Inicjalizacja sterowania
##### 2. Odczyt sygnałów wejściowych sterownika
##### 3. Wykonanie zadania sterownika - programu
##### 4. Zapis danych wyjściowych sterownika
##### 5. Obsługa komunikacji
##### 6. Autodiagnostyka

### 1. Inicjalizacja sterowania [Przetłumaczone]
Na tym etapie sterownik wykonuje czynności niezbędne do rozpoczęcia pracy, w tym sprawdza poprawność działania swoich obwodów wewnętrznych oraz konfigurację sprzętową podzespołów i modułów rozszerzeń. W przeciwieństwie do innych etapów, które powtarzają się za każdą iteracją pętli, ten jest wykonywany tylko raz.

### 2. Odczyt sygnałów wejściowych sterownika [Przetłumaczone]
Sterownik odczytuje stany wszystkich wejść, zapisuje ich wartość w specjalnie wydzielonym miejscu w pamięci, nazywanym obrazem wejść procesu PII (ang. Process-Image Input).

### 3. Wykonanie zadania sterownika - programu [Przetłumaczone]
W tej fazie przetwarzany jest program użytkownika. Na jego podstawie wykonywane są określone działania. Wszystkie polecenia wykonywane są w sekwencji, jedno po drugim. Uniemożliwia to wykonanie dwóch czynności na raz. Zapisywane są również wyniki obliczeń w pamięci danych. Po wykonaniu wszystkich poleceń zostaje wygenerowany nowy stan wyjść, który jest zapisywany do specjalnego miejsca w pamięci, nazywanego obrazem wyjść procesy PIO (ang. Process-Image Output).

Wykonanie programu trwa pewien czas zależny od parametrów i długości programu (kilka do kilkuset milisekund). W najgorszym przypadku opóźnienie wnoszone przez sterownik może osiągnąć do 2 cykli sterownika.

Należy zwrócić uwagę na przypisywanie wartości do zmiennych wyjściowych. Proces ten powinien występować w kodzie tylko raz z uwagi na fakt, że wartości zmiennych będą zależały tylko od ostatnio wykonanej instrukcji przypisania.

### 4. Zapis danych wyjściowych sterownika[Przetłumaczone]
Następuje pobranie wartości stanu wyjść z PIO oraz zostaje on zapisany do fizycznych portów wyjściowych urządzenia. Wyjścia zostają uaktualnione i przyjmują wartość wyliczoną na podstawie programu sterującego. Aktualizacja następuje tylko raz w danym cyklu pracy.

### 5. Obsługa komunikacji[Przetłumaczone]
Ta faza występuje tylko, gdy wykorzystywana jest komunikacja sieciowa z innymi urządzeniami zewnętrznymi np. inne sterowniki, panele operatorskie.
Następuje dwukierunkowa transmisja danych oraz obsługa programatora np. komputera przekazującego komendy sterujące takich jak przełączenie trybu pracy, odczyt/zapis programu.

### 6. Autodiagnostyka[Przetłumaczone]
Sterownik przeprowadza testy autodiagnostyczne, aby monitorować swój stan i wykrywać ewentualne awarie. Sprawdza on między innymi:
- temperaturę podzespołów
- napięcie zasilania systemu
- obciążenie procesora
- pojawianie się błędów logicznych podczas realizacji programu
- interfejsy komunikacyjne, modułów wejściowych/wyjściowych oraz pamięć

Przy wykryciu problemów sterownik zgłasza błąd użytkownikowi lub systemowi nadzorującemu poprzez komunikaty lub diody. Podejmuje on następnie działania naprawcze takie jak niezwłoczne zatrzymanie, uniemożliwiające niekontrolowane załączanie urządzeń wykonawczych lub przejście w tryb awaryjny, w którym podejmuje ograniczone decyzje.

## 3. Zapis i odczyt danych[Przetłumaczone]

##### W rozdziałach powyżej wyszczególnione zostały typy pamięci, którymi posługuje się sterownik PLC.

- RAM - Random Access Memory - pamięć RAM odpowiada za przechowywanie danych i programów. Pamięć ta służy do odczytu oraz do zapisu danych lub programów użytkownika. W praktyce oznacza to, że każdy nowy program lub jego nowa sekcja jest zapisana właśnie w pamięci RAM. Wszystkie zmiany dokonane przez programistę w programie lub danych zostaną automatycznie nadpisane w pamięci. Wartości Input/Output również przechowywane są w sekcji pamięci RAM.
  Należy pamiętać, że wszystkie dane przechowywane w pamięci RAM po wyłączeniu zasilania (jeżeli RAM nie posiada dodatkowego źródła zasilania) zostaną stracone.
- ROM - Read Only Memory - pamięć ROM służy jedynie do odczytywania danych. W niej przechowywane są informacja takie jak: system operacyjny, wersja oprogramowania oraz zmienne zdefiniowane przez system (te również zapisywane są w pamięci EEPROM).

Sterowniki PLC posiadają również pamięć cache, czyli pamięć podręczną, podobnie jak komputery czy laptopy. Tutaj pamięć podręczna może przechowywać zadania okresowe i zdarzenia, dane dotyczące użytkowania systemu i programy. Dużą zaletą pamięci cache jest szybkość zapisywania danych - może być nawet kilkukrotnie szybsza od pamięci RAM. 

Sterowniki posiadają ograniczoną ilość pamięci, dlatego przed programowaniem ważne jest zapoznanie się z jego parametrami, które znajdziemy w „Datasheet” danego sterownika. 
Dodatkowym utrudnieniem będzie brak normy, która odpowiadałaby za ustandaryzowanie, gdzie znajdują się poszczególne lokalizacje pamięci, w których będziemy zapisywać dane. Mapy pamięci różnią się nie tylko wśród różnych producentów, ale również wewnątrz pojedynczych urządzeń danego producenta. 
W pamięci sterowników, wejścia i wyjścia cyfrowe odpowiadają pojedynczym bitom, natomiast wejścia i wyjścia analogowe odpowiadają wielobitowym zapisom.
Dodatkową zaletą sterowników PLC jest możliwość połączenia ich z Internetem co pozwala na programowanie, diagnostykę, pobieranie i wysyłanie danych.

Poniżej tabela obrazująca mapowanie pamięci sterownika [CPM1A na podstawie dokumentacji firmy Omron](https://docplayer.pl/10309133-Mapa-pamieci-sterownika-cpm1-a.html):

<img width="408" alt="mapowanie_pamieci" src="https://github.com/Morpheus1024/programmable-logic-controllers---ebook-jwszolek/assets/105047709/d0f1b488-da3c-48ca-b726-d7fbc8e1dd67">

## 4. Obszary zastosowań, wady i zalety[Przetłumaczone]

##### Ich główną zaletą jest ułatwienie w wykonywaniu powtarzalnych czynności np. w sterowaniu sygnalizatorami świetlnymi, windami czy też ruchomymi schodami.

Obszar zastosowań sterowników jest bardzo szeroki. Ze względu na swoją funkcjonalność, można je spotkać w takich dziedzinach jak:
- automatyce przemysłowej (sterują całymi liniami produkcyjnymi),
- transporcie,
- przemyśle chemicznym oraz farmaceutycznym,
- energetyce,
- automatyce budynkowej jak i w urządzeniach codziennego użytku (sterowanie inteligentnych domów, bezpieczeństwo, klimatyzacja, monitoring, oświetlenie budynku),
- logistyce magazynowej (sortowanie, składanie, układanie)
- przemysł rolny (nawadnianie pól).

#### Zalety:[Przetłumaczone]

- porównując sterownik PLC z systemami bazującymi na układach przekaźnikowych, zmiana algorytmu działania nie wymaga zmiany w instalacji,
- prosty montaż znacznie przyspiesza czas trwania prac instalacyjnych,
- mniejsze koszty wdrożenia, przez co wszystkie projekty mogą być realizowane w krótszym czasie, 
- w razie awarii możliwa jest zdalna diagnostyka, która może być realizowana praktycznie z dowolnego miejsca na ziemi,
- niskie zużycie energii oraz wysoka niezawodność,
- moduły rozszerzeń oraz integracja z innymi elementami automatyki,
- zaprojektowane z myślą, aby wytrzymały wibracje, temperaturę i wilgotność,
- mały rozmiar,
- łatwe programowanie, stosunkowo łatwe języki programowania, 
- o wiele tańsze od komputerów przemysłowych.

#### Wady:[Przetłumaczone]

- mała elastyczność w porównaniu do możliwości komputerów przemysłowych, które są w stanie wykonać o wiele więcej zadań związanych ze sterowaniem, pomiarami jak i komunikacją oraz transmisją danych,
- łączenie przewodów wymaga dużo pracy,
- znalezienie błędu jest trudne i wymaga to specjalistycznej wiedzy,
- ograniczenie pracy sterowników w wysokich temperaturach oraz mocnych wibracjach (zbudowane są z półprzewodników),
- w pewnych przypadkach nawet małe projekty mogą być kosztowne.

## 5. Rozwój sterowników [Przetłumaczone]

### Sterowniki z roku na rok oferują coraz to więcej możliwości, a zwiększona funkcjonalność ułatwia pracę.

- Dzięki możliwości połączenia z Internetem, sterowniki PLC uzyskały możliwość pobierania oraz wysyłania danych do sieci. Obecnie dużym ułatwieniem jest możliwość programowania sterowników przez przeglądarkę. Nie wymaga to mocnego komputera oraz specjalistycznych programów,
- Wiele protokołów - ułatwienie wymiany danych - łatwiejsza komunikacja między elementami automatyki,
- Miniaturyzacja - mniejsze rozmiary sterowników bez utraty wydajności czy funkcjonalności,
- Nowe biblioteki i funkcje - dedykowane biblioteki i funkcje pozwalają na bardzo łatwe realizowanie skomplikowanych operacji. Umożliwiają one na kontrolowanie prędkości, pozycji czy momentów,
- Modułowa konstrukcja pozwala nie tylko na łatwą wymianę uszkodzonych elementów, ale również na łatwe dopasowanie konfiguracji sprzętowej i możliwość jej późniejszej rozbudowy.

źródła: ["Przetłumaczone"]
- [Advantages and disadvantages of PLC](https://www.ecstuff4u.com/2019/04/advantages-disadvantages-PLC.html?m=1&fbclid=IwAR2B0W7Fe8AhJkZ_5w2EYA_qZaALmDa5QXpS4rs-ul1a6M0_8VXwOCWvURc)
- Astor - [Wszystko o HMI (Human-Machine Interface), co automatyk powinien wiedzieć](https://www.astor.com.pl/poradnikautomatyka/wszystko-o-hmi-co-automatyk-powinien-wiedziec/)
- EMT Systems - [FAQ](https://emt-systems.pl/faq-plc/gdzie-obecnie-wykorzystuje-sie-sterowniki-plc.html)
- Inst Tools - [PLC Memory Mapping and I/O addressing](https://instrumentationtools.com/plc-memory-mapping-io-addressing/)
- Jacek Barański - [Separacja galwaniczna w nowoczesnych przyrządach i systemach pomiarowych](http://www.pkeopk.sep.com.pl/jurata2008/Baranski_Separacja.pdf)
- dr inż. Jarosław Tarnawski - [Sterowniki programowalne - System GE Fanuc serii 90-30](https://eia.pg.edu.pl/documents/184139/29070092/W5_Wyk%C5%82ad%20-%20SCADA.pdf), Zasada działania systemu
- [Mapa pamięci sterownika CPM1(A)](https://docplayer.pl/10309133-Mapa-pamieci-sterownika-cpm1-a.html) 
- dr inż. Marcin Bieńkowsk - [Sterowniki programowalne](https://automatykaonline.pl/Artykuly/Sterowanie/Sterowniki-programowalne)
- Marcin Kielczewski - [Sterowniki PLC](http://marcin.kielczewski.pracownik.put.poznan.pl/ZSP05.pdf)
- Marcin Pawlak - [Sterowniki programowalne](https://dbc.wroc.pl/Content/7791/PDF/Pawlak_Sterowniki_programowalne.pdf)
- [Materiały dydaktyczne Iwony Pająk](http://staff.uz.zgora.pl/ipajak/materials/ar/plc.pdf)
- [Materiały dydaktyczne Politechniki Łódzkiej](http://www.kmrnis.p.lodz.pl/files/Sterowniki-PLC.pdf)
- Mateusz Steczkowski - [Podstawa systemów automatyki. Czym jest sterownik PLC?](https://www.astor.com.pl/poradnikautomatyka/podstawa-systemow-automatyki-czym-jest-sterownik-plc/)
- [PLC - czym są sterowniki swobodnie programowalne](https://sterowniki-plc.net/plc-czym-sa-sterowniki-programowalne)
- Piotr Gwiazdkowski - [5 ciekawych funkcjonalności nowoczesnych sterowników PLC](https://youtu.be/gSI8Hgdrjxg) 
- PolskiPrzemysł - [Co to jest PLC, z czego się składa i do czego służy?](https://polskiprzemysl.com.pl/utrzymanie-ruchu/co-to-jest-sterownik-plc/)
- [Pamięć cache - czym jest pamięć podręczna?](https://www.mediaexpert.pl/poradniki/komputery-i-tablety/pamiec-cache)
- [Sterownik PLC – budowa, rodzaje, zastosowanie](https://www.ebmia.pl/wiedza/porady/automatyka-porady/sterownik-plc-budowa-rodzaje-zastosowanie/)
- Viral Nagda - [Types of PLC Memory](https://instrumentationtools.com/types-of-plc-memory/)
- Wikipedia - [Flash memory](https://en.wikipedia.org/wiki/Flash_memory) 
- Wikipedia - [Switched-mode power supply](https://en.wikipedia.org/wiki/Switched-mode_power_supply)


# Proponuję pisać wersję angielską niżej, a dopiero na koniec usunąć wersję polską

# Facilities and development of programmable logic controllers

## Topics:

### 1. PLC internal structure
### 2. Working principle of the controller
### 3. Writing and reading of data
### 4. Application areas
### 5. Development of the controllers

## 1. PLC internal structure

### PLC consists of the following components:
- central processing unit
- memory
- input module
- output module
- power supply unit

### Central processing unit

The main component of any PLC. It is responsible for the operation of the controller, proper operation of expansion modules, execution of the program and communication with the programmer.
The most important component of the central unit is the microprocessor, whose parameters dictate the capabilities of the controller itself and its specification e.g.:

- number of input and output variables
- the maximum number of expansion modules supported
- the speed of the controller - the parameter determining this value is expressed as the time of the program cycle, e.g. as the number of executed instructions per time unit.
- the size of the memory allocated for user data and for the program
- possibility of using special functions, which include floating point operations
- communication capabilities, e.g. support for LAN functions

### Memory
A key element for the operation of the CPU. It stores the control program and user data.

#### Applied types of memory 
- RAM - Random Access Memory - used as operational memory, it is characterized by high read and write speeds. When the power is disconnected, it loses all stored data. For this reason, an additional battery is used to replace the power supply when it is missing or turned off.
- PROM - Programmable Read-Only Memory - its overwriting involves burning through the connectors inside the memory. Resistor arrays and transistor arrays are used. In the former, resistors are burned to open, which means programming a logic zero. Transistors, on the other hand, are burned into a short circuit, which is equivalent to programming a logical one.
- EEPROM - Electrically Erasable Programmable Read-Only Memory - programmable read-only memory that is programmed and erased electrically. Unlike PROM-type memory, it can also be overwritten. It does not require a power supply like RAM type memory. Used as program memory but also as backup storage.
- FLASH EPROM - Flash Erasable Programmable Read-Only Memory - a type of memory that is a development of EEPROM technology. Used where EEPROM, but also as a storage medium for copies of data that can be transferred between controllers, for example, in the form of SD cards.

### Input modules
They are divided into digital and analog types. The former take data in binary form (1/0), and the second in the form of continuous signals, e.g. temperature value, weight, tilt. 

#### Digital inputs
They are a key part of the communication interface between the components of the external control system and the CPU. They are responsible for converting variable or continuous signals from external devices into digital signals understood by the CPU.
One encounters DC-powered modules, where most often the logic zero corresponds to 0V and the logic one to 24V, and AC-powered ones, which adjust the logic level to the voltage value of the power grid.
It is common to find the use of galvanic separation (i.e., a solution in which the current from one electrical block does not flow directly to another block) between external circuits and the main bus of the PLC. For this purpose, transporters are used for direct current and optoisolators for alternating current.

#### Analog inputs
Their task is to translate received analog signals into digital versions, understood by the central unit. The main component of this module is an analog-to-digital converter, which passes on the discrete form of the received input signal. It performs quantization most often on 16 bits. Common resolutions of such a converter are from 12 to 16 bits.
Many analog signals are used. Here are some examples:
- ###### voltage signals e.g. 0 - 10V, 1 - 5V, -10 - +10V
- ###### current signals e.g. 0 - 20mA, 4 - 20mA
- ###### resistance measurement signal

### Output modules
Similar to inputs, they are divided according to the type of data that can be obtained from them - digital and analog. They are used to control automation executive devices, e.g. contacts, regulators, solenoid valves, control systems.

#### Digital outputs
They are used to output signals in discrete form to external circuits of executive devices. Most often they are connected to switches or contactors, which are responsible for the operation of external devices/modules.
We distinguish two groups of digital outputs due to the type of output control element:

- ###### Relay outputs
They have outputs for normally open and closed relay contacts, the purpose of which is to switch on and off external electrical systems.

- ###### Solid-state outputs
Instead of contacts, they use transistors for DC systems and thyristors or triacs for AC systems. They perform the same function as relays, but have a significant advantage over them in terms of speed of operation and durability, as well as making no noise during operation.

#### Analog outputs
Their task is to convert numerical values stored in memory into signals that are continuous in time. Further, like digital outputs, they transmit signals to external devices.
The most important component of this module is the digital-to-analog converter. At its output appears current or voltage signals. The most common are those listed in the analog inputs chapter. Common resolutions of such a converter are from 12 to 16 bits.

### Communication module
The communication module is designed to connect other devices to the controller by exchanging data between them. An industrial communication network is used for such communication.
Examples of devices with which the controller can communicate:
- other PLCs, including those operating in redundant mode,
- sensors and measurement transducers, smart sensors,
- executive devices equipped with their own communication interfaces,
- master control systems,
- HMI (Human-Machine Interface) device, e.g. control panels, displays, information LEDs

### Power module
The component responsible for providing the energy necessary for the operation of the controller. It can be a separate part, but also can be found power supplies integrated into the housing of the controller. In general, systems adapted to 24V DC power supply are used, but there are also designs that can supply the controller directly from the power grid with AC voltage of 230V or 110V (this depends on the power system of the country).
Pulse power supplies are often used as a power supply, which are characterized by the following features:
- high output voltage stabilization
- high efficiency of the converter of AC voltage to DC voltage
- high power in relation to small dimensions
- built-in protection against overvoltage and overload
- compliance with many standards, allowing operations in harsh environments as well as electromagnetic compatibility

The power supplies used in the controllers are often dedicated to the designed structures, what makes them quite expensive.

## 2. Working principle of the controller

Each PLC works by continuously looping a sequence of commands stored in its memory, called a cycle.
A single instruction is the smallest part of the control program and consists of an operation specifying the type of function to be performed and arguments specifying input and output signals of the controller connected with each other by logical functions. These commands are processed by the controller's microprocessor system, which, on their basis, performs appropriate actions, such as: logical operations, arithmetic operations, reading and writing data from/to memory.
Execution of part of the phases of the cycle depends on the operating mode of the controller. The basic operating modes are:
- RUN - the correct operating mode of the controller, in which all phases of the program cycle are performed. The user cannot modify the content of the program during it.
- STOP – controller stopping mode, in which data reading and writing are usually omitted and the program execution phase is always omitted. This mode is intended for programming and configuring the controller. The user can control the controller outputs by forcing appropriate logical states.
- MONITOR – controller operating mode with the possibility of viewing its memory. It allows the user to check the correct operation of his application by viewing the values of characteristic process variables and the ability to force logical states on the controller's outputs. It is also possible to edit most areas of the controller's memory (changing the values of timers, counters, I/O memory, etc.). The MONITOR mode is especially useful in the commissioning phase of the control system.

Special modes designed for testing:
- work in a single cycle (Single Sweep),
- step operation (execution of only one command)
- work with normal cycle, but without activation of output signals in
digital output modules (test mode).

The program cycle usually lasts from fractions to tens of ms. If the allowed cycle time is exceeded (usually 100 to 500 ms), the cycle is aborted and a cycle timeout error is logged. Cycle lengths are constantly monitored by the clock system in the CPU, the so-called [watchdog](https://en.wikipedia.org/wiki/Watchdog_timer).

### Phases of the controllers work cycle

##### 1. Controller Initilization
##### 2. Input Data Reading
##### 3. Execution of Contorllers Task
##### 4. Output Data Writing
##### 5. Communications Handling
##### 6. Self-diagnosis

### 1. Controller Initilization
At this stage controller performs necessary actions to start working, including checking functionality of internal circuits, configurating the hardware of components and expansion modules. Unlike other stages which repeat with each loop iteration, this is executed only once.

### 2. Input Data Reading
The controller reads the states of all inputs, saves their values in a dedicated memory area called the Process-Image Input (PII).

### 3.  Execution of Contorllers Task
In this phase users program is processed. Based on its instructions specific actions are being executed. All commands are executed in a sequence, one after the other. This prevents execution of two actions at the same time. Calculation results are also stored in data memory. After executing all commands a new state of outputs is generated that is stored in a specific memory location called the Process-Image Output (PIO).

Program execution takes a certain time that dependents on the parameters and the program’s length (from a few to several hundred milliseconds). In the worst case scenario the delay introduced by the controller can reach up to 2 controller’s cycles.

Attention should be paid to assigning values to output variables. This process in the code should only occur once because the values of variables will depend only on the last executed assignment statement.

### 4. Saving the controller output data
The value of the status of the outputs from the PIO is downloaded and is written to the physical output ports of the device. The outputs are updated to the value calculated from the control program. The update occurs only once per work cycle.

### 5. Communication support
This phase occurs only when network communication with other external devices is used, e.g. other controllers, operator panels.
There is a two-way data transmission and programmer support, e.g. a computer transmitting control commands, such as switching the operating mode, reading/writing the program.

### 6. Self-diagnosis
The controller performs self-diagnostic tests to monitor its status and detect possible failures. It checks, among other things:
- component temperature
- system supply voltage
- CPU load
- appearance of logical errors during the execution of the program
- communication interfaces, input/output modules and memory

When problems are detected, the controller reports an error to the user or supervisory system through messages or LEDs. It then takes corrective action, such as an immediate stop to prevent uncontrolled activation of actuators, or a fallback mode where it makes limited decisions.

## 3. Writing and reading of data

##### The chapters above list the types of memory that the PLC uses.
- RAM - Random Access Memory - RAM memory is responsible for storing data and programs. This memory is used for reading and writing user data or programs. In practice, this means that every new program or its new section is saved in RAM. All changes made by the programmer to the program or data will be automatically overwritten in the memory. Input/Output values are also stored in the RAM section.
  Please note that all data stored in RAM will be lost when the power is turned off (if RAM does not have an auxiliary power source).
- ROM - Read Only Memory - is used only for reading data. It stores information such as: operating system, software version and variables defined by the system (these are also saved in the EEPROM).

PLC controllers also have a cache memory, just like computers or laptops. The cache can store periodic tasks and events or system and program usage data. The big advantage of cache memory is the speed of data saving - it can be even several times faster than RAM memory.

The controllers have a limited amount of memory, so before programming it is important to read its parameters, which can be found in the "Datasheet" of a given controller.
An additional difficulty will be the lack of a standard that would be responsible for standardizing where the individual memory locations in which we will save data are located. Memory maps differ not only between different manufacturers, but also within individual devices of a given manufacturer.

In the controllers memory, digital inputs and outputs correspond to single bits, while analog inputs and outputs correspond to multi-bit records.
An additional advantage of PLC controllers is the ability to connect them to the Internet, which allows programming, diagnostics, downloading and sending data wirelessly.

The table below shows the mapping of the controller's memory [CPM1A based on Omron documentation](https://docplayer.pl/10309133-Mapa-pamieci-sterownika-cpm1-a.html):

<img width="408" alt="memory_mapping" src="https://github.com/Morpheus1024/programmable-logic-controllers---ebook-jwszolek/assets/105047709/d0f1b488-da3c-48ca-b726-d7fbc8e1dd67">

## 4. Application areas, advantages and disadvantages

##### The main advantage of PLCs is to facilitate repetitive activities, e.g. in controlling traffic lights, elevators or escalators.

The application area of drivers is very wide. Due to their functionality, they can be found in such areas as:
- industrial automation (controlling entire production lines),
- transport,
- chemical and pharmaceutical industries,
- energetics,
- building automation and everyday use devices (control of smart homes, security, air conditioning, monitoring, lighting),
- warehouse logistics (sorting, folding, stacking),
- agricultural industry (field irrigation).

#### Advantages:

- comparing the PLC controller with systems based on relay systems, the change of the operation algorithm does not require any changes in the installation,
- simple assembly significantly shortens the duration of installation,
- lower implementation costs, which means that all projects can be implemented in a shorter time,
- in case of a failure remote diagnostics are possible, they can be carried out from anywhere in the world
- low power consumption and high reliability,
- possibility of connecting an expansion modules and integration with other automation elements,
- designed to resist vibration, temperature and humidity,
- portable size,
- easy programming, relatively easy programming languages,
- much cheaper than industrial computers.

#### Disadvantages:

- low flexibility compared to the capabilities of industrial computers, which are able to perform many more tasks related to control, measurement as well as communication and data transmission,
- cable management requires a lot of work,
- finding a bug is difficult and requires specialist knowledge,
- limiting the work of controllers in too high temperatures and too strong vibrations (because they are made of semiconductors),
- in some cases, even small projects can be expensive.

## 5. development of controllers

#### Controller's capabilities and grow each year and their increased functionality makes working with them easier:

- With the ability to connect to the Internet, PLCs have gained the ability to download and send data through network. Nowadays, a great convenience is the ability to program controllers via a browser, which does not require a powerful computer or specialized programs,
- Multiple protocols - facilitating data exchange - easier communication between automation components,
- Miniaturization - smaller size of controllers without loss of performance or functionality,
- New libraries and functions - dedicated libraries and functions allow complex operations to be implemented very easily. They make it possible to control speeds, positions or moments,
- Modular design allows not only easy replacement of damaged components, but also easy customization of the hardware configuration and the possibility of future expansion.

## Sources
As the assignment's text was originally written in Polish, most of the sources used and cited were also. For the inconvenience, we apologize.
- [Advantages and disadvantages of PLC](https://www.ecstuff4u.com/2019/04/advantages-disadvantages-PLC.html?m=1&fbclid=IwAR2B0W7Fe8AhJkZ_5w2EYA_qZaALmDa5QXpS4rs-ul1a6M0_8VXwOCWvURc)
- Astor - [Wszystko o HMI (Human-Machine Interface), co automatyk powinien wiedzieć](https://www.astor.com.pl/poradnikautomatyka/wszystko-o-hmi-co-automatyk-powinien-wiedziec/)
- EMT Systems - [FAQ](https://emt-systems.pl/faq-plc/gdzie-obecnie-wykorzystuje-sie-sterowniki-plc.html)
- Inst Tools - [PLC Memory Mapping and I/O addressing](https://instrumentationtools.com/plc-memory-mapping-io-addressing/)
- Jacek Barański - [Separacja galwaniczna w nowoczesnych przyrządach i systemach pomiarowych](http://www.pkeopk.sep.com.pl/jurata2008/Baranski_Separacja.pdf)
- dr inż. Jarosław Tarnawski - [Sterowniki programowalne - System GE Fanuc serii 90-30](https://eia.pg.edu.pl/documents/184139/29070092/W5_Wyk%C5%82ad%20-%20SCADA.pdf), Zasada działania systemu
- [Mapa pamięci sterownika CPM1(A)](https://docplayer.pl/10309133-Mapa-pamieci-sterownika-cpm1-a.html) 
- dr inż. Marcin Bieńkowsk - [Sterowniki programowalne](https://automatykaonline.pl/Artykuly/Sterowanie/Sterowniki-programowalne)
- Marcin Kielczewski - [Sterowniki PLC](http://marcin.kielczewski.pracownik.put.poznan.pl/ZSP05.pdf)
- Marcin Pawlak - [Sterowniki programowalne](https://dbc.wroc.pl/Content/7791/PDF/Pawlak_Sterowniki_programowalne.pdf)
- [Materiały dydaktyczne Iwony Pająk](http://staff.uz.zgora.pl/ipajak/materials/ar/plc.pdf)
- [Materiały dydaktyczne Politechniki Łódzkiej](http://www.kmrnis.p.lodz.pl/files/Sterowniki-PLC.pdf)
- Mateusz Steczkowski - [Podstawa systemów automatyki. Czym jest sterownik PLC?](https://www.astor.com.pl/poradnikautomatyka/podstawa-systemow-automatyki-czym-jest-sterownik-plc/)
- [PLC - czym są sterowniki swobodnie programowalne](https://sterowniki-plc.net/plc-czym-sa-sterowniki-programowalne)
- Piotr Gwiazdkowski - [5 ciekawych funkcjonalności nowoczesnych sterowników PLC](https://youtu.be/gSI8Hgdrjxg) 
- PolskiPrzemysł - [Co to jest PLC, z czego się składa i do czego służy?](https://polskiprzemysl.com.pl/utrzymanie-ruchu/co-to-jest-sterownik-plc/)
- [Pamięć cache - czym jest pamięć podręczna?](https://www.mediaexpert.pl/poradniki/komputery-i-tablety/pamiec-cache)
- [Sterownik PLC – budowa, rodzaje, zastosowanie](https://www.ebmia.pl/wiedza/porady/automatyka-porady/sterownik-plc-budowa-rodzaje-zastosowanie/)
- Viral Nagda - [Types of PLC Memory](https://instrumentationtools.com/types-of-plc-memory/)
- Wikipedia - [Flash memory](https://en.wikipedia.org/wiki/Flash_memory) 
- Wikipedia - [Switched-mode power supply](https://en.wikipedia.org/wiki/Switched-mode_power_supply)
